<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  background:#0f1220;
  color:white;
  font-family:Arial;
  padding:40px;
}

input, textarea {
  width:100%;
  padding:8px;
  margin-bottom:10px;
  border-radius:6px;
  border:none;
}

button {
  padding:8px 15px;
  margin:5px 5px 5px 0;
  border-radius:6px;
  border:2px solid #aab0ff;
  background:transparent;
  color:#aab0ff;
  cursor:pointer;
}

button:hover {
  background:#aab0ff;
  color:#0f1220;
}
</style>
</head>

<body>

<script>
const PASSWORD = "Logar2026";

const input = prompt("Mot de passe admin :");

if (input !== PASSWORD) {
  alert("Accès refusé");
  window.location.href = "funfacts.html";
}
</script>

<h1>Interface Admin</h1>

<input id="title" placeholder="Nom du jeu">
<input id="image" placeholder="Chemin image (images/xxx.jpg)">
<input id="gif" placeholder="Chemin gif (images/xxx.gif)">

<textarea id="fact1" placeholder="Fait 1"></textarea>
<textarea id="fact2" placeholder="Fait 2"></textarea>
<textarea id="fact3" placeholder="Fait 3"></textarea>

<button onclick="saveGame()">Enregistrer</button>
<button onclick="resetForm()">Annuler</button>

<hr>

<h2>Liste des jeux</h2>
<div id="gameList"></div>

<script>

let games = JSON.parse(localStorage.getItem("games")) || [];
let editIndex = null;

/* ========= SAUVEGARDE ========= */

function saveGame() {

  const gameData = {
    title: document.getElementById("title").value,
    image: document.getElementById("image").value,
    gif: document.getElementById("gif").value,
    facts: [
      document.getElementById("fact1").value,
      document.getElementById("fact2").value,
      document.getElementById("fact3").value
    ]
  };

  if (editIndex !== null) {
    games[editIndex] = gameData;
    editIndex = null;
  } else {
    games.push(gameData);
  }

  localStorage.setItem("games", JSON.stringify(games));

  resetForm();
  loadGameList();
}

/* ========= MODIFIER ========= */

function editGame(index) {

  const game = games[index];

  document.getElementById("title").value = game.title;
  document.getElementById("image").value = game.image;
  document.getElementById("gif").value = game.gif;
  document.getElementById("fact1").value = game.facts[0];
  document.getElementById("fact2").value = game.facts[1];
  document.getElementById("fact3").value = game.facts[2];

  editIndex = index;
}

/* ========= SUPPRIMER ========= */

function deleteGame(index) {

  if (!confirm("Supprimer ce jeu ?")) return;

  games.splice(index, 1);
  localStorage.setItem("games", JSON.stringify(games));
  loadGameList();
}

/* ========= RESET ========= */

function resetForm() {
  document.getElementById("title").value = "";
  document.getElementById("image").value = "";
  document.getElementById("gif").value = "";
  document.getElementById("fact1").value = "";
  document.getElementById("fact2").value = "";
  document.getElementById("fact3").value = "";
  editIndex = null;
}

/* ========= AFFICHAGE ========= */

function loadGameList() {

  const container = document.getElementById("gameList");

  container.innerHTML = games.map((game, index) => `
    <div style="margin-bottom:10px; padding:10px; border:1px solid #333;">
      <strong>${game.title}</strong>
      <br>
      <button onclick="editGame(${index})">Modifier</button>
      <button onclick="deleteGame(${index})">Supprimer</button>
    </div>
  `).join("");
}

loadGameList();

</script>

</body>
</html>
